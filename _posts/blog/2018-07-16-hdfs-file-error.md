---
layout: post
title: Hbase在hdfs中的数据坏掉导致的问题
description: 磁盘问题导致的文件块损坏，在hbase查询期间暴露了问题。
category: blog
---

前天遇到的这个问题。

磁盘坏道，这是很常见的现象，hbase使用hdfs作为底层存储，遇到对坏道部分的查询，不是从replication副本部分拿到数据结果，而是直接报错，导致上层的数据统计出现问题。
因为是磁盘坏道，在hdfs看来并没有失去一个副本，所以也不会对数据进行数据块的处理，一旦访问到这块数据，就会报错了。我尝试用hdfs dfs -get命令读取坏块的文件，会报错，但文件却会正常读出。
我尝试hdfs dfs -rm删掉这个文件，再put进去，这个文件就又可用了。

这算是hdfs不完善的一个点，在这记录一下。

---

暂时先这些。
